from pyvis.network import Network
from sys import argv
import json

switches = {}
#switches = {'172.17.8.89': {'interfaces': {'GigabitEthernet0': {'172.18.159.8': 'GigabitEthernet0/1'}}, 'platform': 'Cisco C921-4P', 'hostname': 'c921_Kapital_N.gsprom.local'}, '172.18.159.8': {'interfaces': {'GigabitEthernet0/4': {'172.18.159.120': 'br1'}, 'GigabitEthernet0/12': {'172.18.159.14': 'GigabitEthernet0/10'}, 'GigabitEthernet0/1': {'172.18.152.1': 'GigabitEthernet0'}, 'GigabitEthernet0/11': {'172.18.159.11': 'GigabitEthernet0/12'}}, 'platform': 'cisco WS-C2960CX-8PC-L', 'hostname': 'c2960-NUr-Kaptial-Vagon-svyazi.gsprom.lo'}, '172.18.159.40': {'interfaces': {}, 'platform': 'Rocket Prism 5AC Gen2', 'hostname': 'Machta-sviazi'}, '172.18.159.16': {'interfaces': {'GigabitEthernet0/9': {'172.18.159.120': 'br1'}, 'GigabitEthernet0/10': {'172.18.159.17': 'GigabitEthernet0/10'}}, 'platform': 'cisco WS-C2960CX-8PC-L', 'hostname': 'c29-kap-pil.gsprom.local'}, '172.18.159.17': {'interfaces': {'GigabitEthernet0/4': {'172.18.154.72': 'Port1'}, 'GigabitEthernet0/10': {'172.18.159.16': 'GigabitEthernet0/10'}}, 'platform': 'cisco WS-C2960CX-8PC-L', 'hostname': 'c29-kap-pil2.gsprom.local'}, '172.18.159.9': {'interfaces': {'GigabitEthernet1/0/26': {'172.18.159.14': 'GigabitEthernet0/10'}, 'GigabitEthernet1/0/28': {'172.18.159.7': 'GigabitEthernet1/1/2'}}, 'platform': 'cisco WS-C2960X-24PS-L', 'hostname': 'C2960-Avista.gsprom.local'}, '172.18.159.14': {'interfaces': {'GigabitEthernet0/10': {'172.18.159.9': 'GigabitEthernet1/0/26'}, 'GigabitEthernet0/3': {'172.18.159.72': 'GigabitEthernet0'}, 'GigabitEthernet0/4': {'172.18.159.77': 'GigabitEthernet0'}, 'GigabitEthernet0/1': {'172.18.159.74': 'GigabitEthernet0'}, 'GigabitEthernet0/2': {'172.18.159.76': 'GigabitEthernet0'}}, 'platform': 'cisco WS-C2960CX-8PC-L', 'hostname': 'c2960_Hostel3.gsprom.local'}, '172.18.159.7': {'interfaces': {'GigabitEthernet1/1/3': {'172.18.159.15': 'GigabitEthernet0/9'}, 'GigabitEthernet1/1/2': {'172.18.159.9': 'GigabitEthernet1/0/28'}, 'GigabitEthernet1/0/14': {'172.18.154.225': 'Port1'}, 'GigabitEthernet1/0/24': {'172.18.159.2': 'GigabitEthernet1/0/2'}}, 'platform': 'cisco C9200L-24P-4G', 'hostname': 'C9200-video-sw1.gsprom.local'}, '172.18.159.13': {'interfaces': {'GigabitEthernet0/10': {'172.18.159.18': 'GigabitEthernet1/0/23'}, 'GigabitEthernet0/9': {'172.18.159.15': 'GigabitEthernet0/9'}, 'GigabitEthernet0/7': {'172.18.154.139': 'Port1'}, 'GigabitEthernet0/3': {'172.18.159.75': 'GigabitEthernet0'}, 'GigabitEthernet0/4': {'172.18.159.73': 'GigabitEthernet0'}, 'GigabitEthernet0/1': {'172.18.159.68': 'GigabitEthernet0'}, 'GigabitEthernet0/2': {'172.18.159.66': 'GigabitEthernet0'}}, 'platform': 'cisco WS-C2960CX-8PC-L', 'hostname': 'c2960_Hostel_1.gsprom.local'}, '172.18.159.18': {'interfaces': {'GigabitEthernet1/0/18': {'172.18.159.21': 'gi1'}, 'GigabitEthernet1/0/23': {'172.18.159.13': 'GigabitEthernet0/10'}}, 'platform': 'cisco C9300-24T', 'hostname': 'c9300-kapn-sw.gsprom.local'}, '172.18.159.21': {'interfaces': {}, 'platform': 'Cisco SG200-18 (PID', 'hostname': 'e0899d6bfef9'}, '172.18.159.15': {'interfaces': {'GigabitEthernet0/9': {'172.18.158.204': 'br0'}, 'GigabitEthernet0/4': {'172.18.159.125': 'GigabitEthernet0'}, 'GigabitEthernet0/1': {'172.18.159.65': 'GigabitEthernet0'}, 'GigabitEthernet0/2': {'172.18.159.64': 'GigabitEthernet0'}, 'GigabitEthernet0/3': {'172.18.159.67': 'GigabitEthernet0'}}, 'platform': 'cisco WS-C2960CX-8PC-L', 'hostname': 'SW-NUR-KAP-N-OBSH-4-02'}, '172.18.159.2': {'interfaces': {'GigabitEthernet1/0/15': {'172.18.152.199': 'Port1'}, 'GigabitEthernet1/0/13': {'172.18.152.198': 'Port1'}, 'GigabitEthernet1/0/11': {'172.18.154.226': 'Port1'}, 'GigabitEthernet1/0/2': {'172.18.159.7': 'GigabitEthernet1/0/24'}, 'GigabitEthernet1/0/24': {'172.18.159.4': 'GigabitEthernet1/0/24'}, 'GigabitEthernet1/0/23': {'172.18.159.3': 'GigabitEthernet1/0/24'}, 'GigabitEthernet1/0/22': {'172.18.159.6': 'GigabitEthernet1/0/24'}}, 'platform': 'cisco C9200L-24P-4G', 'hostname': 'c9200_SW1_Kap.gsprom.local'}, '172.18.159.4': {'interfaces': {'GigabitEthernet1/0/23': {'172.18.159.20': 'GigabitEthernet1/0/24'}, 'GigabitEthernet1/0/1': {'172.18.154.113': 'Port1'}, 'GigabitEthernet1/0/22': {'172.18.154.142': 'Port1'}, 'GigabitEthernet1/0/21': {'172.18.154.132': 'Port1'}, 'GigabitEthernet1/0/16': {'172.18.154.111': 'Port1'}, 'GigabitEthernet1/0/24': {'172.18.159.2': 'GigabitEthernet1/0/24'}}, 'platform': 'cisco C9200L-24P-4G', 'hostname': 'c9200_sw3_Kap.gsprom.local'}, '172.18.159.20': {'interfaces': {'GigabitEthernet1/0/5': {'172.18.154.40': 'Port1'}, 'GigabitEthernet1/0/22': {'172.18.154.224': 'Port1'}, 'GigabitEthernet1/0/24': {'172.18.159.4': 'GigabitEthernet1/0/23'}}, 'platform': 'cisco C9200L-24P-4G', 'hostname': 'c92-kapn-razv.gsprom.local'}, '172.18.154.132': {'interfaces': {}, 'platform': 'Cisco IP Phone 7941', 'hostname': 'SEP001AE2BCE51A'}, '172.18.159.3': {'interfaces': {'GigabitEthernet1/0/15': {'172.18.159.89': 'GigabitEthernet0'}, 'GigabitEthernet1/0/13': {'172.18.159.71': 'GigabitEthernet0'}, 'GigabitEthernet1/0/20': {'172.18.152.45': 'Port1'}, 'GigabitEthernet1/0/11': {'172.18.159.78': 'GigabitEthernet0'}, 'GigabitEthernet1/0/12': {'172.18.152.66': 'Port1'}, 'GigabitEthernet1/0/9': {'172.18.159.81': 'GigabitEthernet0'}, 'GigabitEthernet1/0/8': {'172.18.152.202': 'Port1'}, 'GigabitEthernet1/0/24': {'172.18.159.2': 'GigabitEthernet1/0/23'}}, 'platform': 'cisco C9200L-24P-4G', 'hostname': 'c9200_sw2_Kap.gsprom.local'}, '172.18.152.45': {'interfaces': {}, 'platform': 'Cisco IP Phone 7941', 'hostname': 'SEP001B0CAD57D3'}, '172.18.159.6': {'interfaces': {'GigabitEthernet1/0/6': {'172.18.154.232': 'Port1'}, 'GigabitEthernet1/0/8': {'172.18.154.101': 'Port1'}, 'GigabitEthernet1/0/1': {'172.18.154.130': 'Port1'}, 'GigabitEthernet1/0/24': {'172.18.159.2': 'GigabitEthernet1/0/22'}}, 'platform': 'cisco C9200L-24P-4G', 'hostname': 'c9200_sw5.gsprom.local'}, '172.18.152.1': {'interfaces': {'GigabitEthernet0': {'172.18.159.8': 'GigabitEthernet0/1'}}, 'platform': 'Cisco C921-4P', 'hostname': 'c921_Kapital_N.gsprom.local'}, '172.18.159.11': {'interfaces': {'GigabitEthernet0/12': {'172.18.159.8': 'GigabitEthernet0/11'}, 'GigabitEthernet0/6': {'172.18.159.86': 'GigabitEthernet0'}, 'GigabitEthernet0/7': {'172.18.159.90': 'GigabitEthernet0'}, 'GigabitEthernet0/11': {'172.18.159.5': 'GigabitEthernet0/12'}, 'GigabitEthernet0/1': {'172.18.158.212': 'br0'}, 'GigabitEthernet0/8': {'172.18.159.88': 'GigabitEthernet0'}, 'GigabitEthernet0/5': {'172.18.159.87': 'GigabitEthernet0'}}, 'platform': 'cisco WS-C2960CX-8PC-L', 'hostname': 'SW-NUR-KAP-N-OBSH-ITR-01.gsprom.local'}, '172.18.159.5': {'interfaces': {'GigabitEthernet0/4': {'172.18.159.29': 'GigabitEthernet0'}, 'GigabitEthernet0/2': {'172.18.159.27': 'GigabitEthernet0'}, 'GigabitEthernet0/1': {'172.18.159.26': 'GigabitEthernet0'}, 'GigabitEthernet0/3': {'172.18.159.28': 'GigabitEthernet0'}, 'GigabitEthernet0/12': {'172.18.159.11': 'GigabitEthernet0/11'}}, 'platform': 'cisco WS-C2960CX-8PC-L', 'hostname': 'c2960-VIP-obshaga.gsprom.local'}}
#switches = {'c2960-NUr-Kaptial-Vagon-svyazi.gsprom.lo': {'interfaces': {'GigabitEthernet0/4': {'Machta-sviazi': 'br1', 'c29-kap-pil.gsprom.local': 'GigabitEthernet0/9', '11111111-01': 'br1'}, 'GigabitEthernet0/12': {'C2960-Avista.gsprom.local': 'GigabitEthernet1/0/26', 'c2960_Hostel3.gsprom.local': 'GigabitEthernet0/10'}, 'GigabitEthernet0/1': {'c921_Kapital_N.gsprom.local': 'GigabitEthernet0'}, 'GigabitEthernet0/11': {'SW-NUR-KAP-N-OBSH-ITR-01.gsprom.local': 'GigabitEthernet0/12'}}, 'platform': 'cisco WS-C2960CX-8PC-L', 'ip': '172.18.159.8'}, 'c29-kap-pil.gsprom.local': {'interfaces': {'GigabitEthernet0/9': {'Machta-sviazi': 'br1', 'c2960-NUr-Kaptial-Vagon-svyazi.gsprom.lo': 'GigabitEthernet0/4', '11111111-01': 'br1'}, 'GigabitEthernet0/10': {'c29-kap-pil2.gsprom.local': 'GigabitEthernet0/10'}}, 'platform': 'cisco WS-C2960CX-8PC-L', 'ip': '172.18.159.16'}, 'c29-kap-pil2.gsprom.local': {'interfaces': {'GigabitEthernet0/4': {'SEP000832a8d84f': 'Port1'}, 'GigabitEthernet0/10': {'c29-kap-pil.gsprom.local': 'GigabitEthernet0/10'}}, 'platform': 'cisco WS-C2960CX-8PC-L', 'ip': '172.18.159.17'}, 'C2960-Avista.gsprom.local': {'interfaces': {'GigabitEthernet1/0/26': {'c2960-NUr-Kaptial-Vagon-svyazi.gsprom.lo': 'GigabitEthernet0/12', 'c2960_Hostel3.gsprom.local': 'GigabitEthernet0/10'}, 'GigabitEthernet1/0/28': {'C9200-video-sw1.gsprom.local': 'GigabitEthernet1/1/2'}}, 'platform': 'cisco WS-C2960X-24PS-L', 'ip': '172.18.159.9'}, 'c2960_Hostel3.gsprom.local': {'interfaces': {'GigabitEthernet0/10': {'c2960-NUr-Kaptial-Vagon-svyazi.gsprom.lo': 'GigabitEthernet0/12', 'C2960-Avista.gsprom.local': 'GigabitEthernet1/0/26'}, 'GigabitEthernet0/3': {'Hostel_3_AP_1_Kapital_N': 'GigabitEthernet0'}, 'GigabitEthernet0/4': {'Hostel_3_AP_2_Kapital_N': 'GigabitEthernet0'}, 'GigabitEthernet0/1': {'Hostel_3_AP_3_Kapital_N': 'GigabitEthernet0'}, 'GigabitEthernet0/2': {'Hostel_3_AP_4_Kapital_N': 'GigabitEthernet0'}}, 'platform': 'cisco WS-C2960CX-8PC-L', 'ip': '172.18.159.14'}, 'C9200-video-sw1.gsprom.local': {'interfaces': {'GigabitEthernet1/1/3': {'c2960_Hostel_1.gsprom.local': 'GigabitEthernet0/9', '4-2': 'br0', '1-2': 'br0', 'SW-NUR-KAP-N-OBSH-4-02': 'GigabitEthernet0/9'}, 'GigabitEthernet1/1/2': {'C2960-Avista.gsprom.local': 'GigabitEthernet1/0/28'}, 'GigabitEthernet1/0/14': {'SEP0019306F4F56': 'Port1'}, 'GigabitEthernet1/0/24': {'c9200_SW1_Kap.gsprom.local': 'GigabitEthernet1/0/2'}}, 'platform': 'cisco C9200L-24P-4G', 'ip': '172.18.159.7'}, 'c2960_Hostel_1.gsprom.local': {'interfaces': {'GigabitEthernet0/10': {'c9300-kapn-sw.gsprom.local': 'GigabitEthernet1/0/23'}, 'GigabitEthernet0/9': {'4-2': 'br0', '1-2': 'br0', 'SW-NUR-KAP-N-OBSH-4-02': 'GigabitEthernet0/9'}, 'GigabitEthernet0/7': {'SEP006CBCA816E4': 'Port1'}, 'GigabitEthernet0/3': {'Hostel_1_AP_2_Kapital_N': 'GigabitEthernet0'}, 'GigabitEthernet0/4': {'Hostel_1_AP_3_Kapital_N': 'GigabitEthernet0'}, 'GigabitEthernet0/1': {'Hostel_1_AP_1_Kapital_N': 'GigabitEthernet0'}, 'GigabitEthernet0/2': {'Hostel_1_AP_4_Kapital_N': 'GigabitEthernet0'}}, 'platform': 'cisco WS-C2960CX-8PC-L', 'ip': '172.18.159.13'}, 'c9300-kapn-sw.gsprom.local': {'interfaces': {'GigabitEthernet1/0/18': {'e0899d6bfef9': 'gi1'}, 'GigabitEthernet1/0/23': {'c2960_Hostel_1.gsprom.local': 'GigabitEthernet0/10'}}, 'platform': 'cisco C9300-24T', 'ip': '172.18.159.18'}, 'SW-NUR-KAP-N-OBSH-4-02': {'interfaces': {'GigabitEthernet0/9': {'c2960_Hostel_1.gsprom.local': 'GigabitEthernet0/9', '4-2': 'br0', '1-2': 'br0'}, 'GigabitEthernet0/4': {'Hostel_4_AP_4_Kapital_N': 'GigabitEthernet0'}, 'GigabitEthernet0/1': {'Hostel_4_AP_3_Kapital_N': 'GigabitEthernet0'}, 'GigabitEthernet0/2': {'Hostel_4_AP_2_Kapital_N': 'GigabitEthernet0'}, 'GigabitEthernet0/3': {'Hostel_4_AP_1_Kapital_N': 'GigabitEthernet0'}}, 'platform': 'cisco WS-C2960CX-8PC-L', 'ip': '172.18.159.15'}, 'c9200_SW1_Kap.gsprom.local': {'interfaces': {'GigabitEthernet1/0/15': {'SEP5017ff771d88': 'Port1'}, 'GigabitEthernet1/0/13': {'SEP0057D2D18F70': 'Port1'}, 'GigabitEthernet1/0/4': {'SEP0019306FD804': 'Port1'}, 'GigabitEthernet1/0/11': {'SEP001B0C961304': 'Port1'}, 'GigabitEthernet1/0/2': {'C9200-video-sw1.gsprom.local': 'GigabitEthernet1/0/24'}, 'GigabitEthernet1/0/24': {'c9200_sw3_Kap.gsprom.local': 'GigabitEthernet1/0/24'}, 'GigabitEthernet1/0/23': {'c9200_sw2_Kap.gsprom.local': 'GigabitEthernet1/0/24'}, 'GigabitEthernet1/0/22': {'c9200_sw5.gsprom.local': 'GigabitEthernet1/0/24'}}, 'platform': 'cisco C9200L-24P-4G', 'ip': '172.18.159.2'}, 'c9200_sw3_Kap.gsprom.local': {'interfaces': {'GigabitEthernet1/0/23': {'c92-kapn-razv.gsprom.local': 'GigabitEthernet1/0/24'}, 'GigabitEthernet1/0/1': {'SEP500604FA4A57': 'Port1'}, 'GigabitEthernet1/0/22': {'SEP001B0C96108D': 'Port1'}, 'GigabitEthernet1/0/21': {'SEP001AE2BCE51A': 'Port1'}, 'GigabitEthernet1/0/16': {'SEP3CCE7358FCC7': 'Port1'}, 'GigabitEthernet1/0/24': {'c9200_SW1_Kap.gsprom.local': 'GigabitEthernet1/0/24'}}, 'platform': 'cisco C9200L-24P-4G', 'ip': '172.18.159.4'}, 'c92-kapn-razv.gsprom.local': {'interfaces': {'GigabitEthernet1/0/5': {'SEP0019306F89F8': 'Port1'}, 'GigabitEthernet1/0/22': {'SEP000832a8763a': 'Port1'}, 'GigabitEthernet1/0/24': {'c9200_sw3_Kap.gsprom.local': 'GigabitEthernet1/0/23'}}, 'platform': 'cisco C9200L-24P-4G', 'ip': '172.18.159.20'}, 'c9200_sw2_Kap.gsprom.local': {'interfaces': {'GigabitEthernet1/0/15': {'AP7_NUR_Kapital_N': 'GigabitEthernet0'}, 'GigabitEthernet1/0/13': {'AP6_NUR_Kapital_N': 'GigabitEthernet0'}, 'GigabitEthernet1/0/20': {'SEP001B0CAD57D3': 'Port1'}, 'GigabitEthernet1/0/11': {'AP5_NUR_Kapital_N': 'GigabitEthernet0'}, 'GigabitEthernet1/0/12': {'SEPB8BEBF23F4E2': 'Port1'}, 'GigabitEthernet1/0/9': {'AP8_NUR_Kapital_N': 'GigabitEthernet0'}, 'GigabitEthernet1/0/8': {'SEP0057D2D18F1A': 'Port1'}, 'GigabitEthernet1/0/24': {'c9200_SW1_Kap.gsprom.local': 'GigabitEthernet1/0/23'}}, 'platform': 'cisco C9200L-24P-4G', 'ip': '172.18.159.3'}, 'c9200_sw5.gsprom.local': {'interfaces': {'GigabitEthernet1/0/6': {'SEP006CBCA8CE7B': 'Port1'}, 'GigabitEthernet1/0/8': {'SEP500604FA4930': 'Port1'}, 'GigabitEthernet1/0/1': {'SEP0019306F1B66': 'Port1'}, 'GigabitEthernet1/0/24': {'c9200_SW1_Kap.gsprom.local': 'GigabitEthernet1/0/22'}}, 'platform': 'cisco C9200L-24P-4G', 'ip': '172.18.159.6'}, 'c921_Kapital_N.gsprom.local': {'interfaces': {'GigabitEthernet0': {'c2960-NUr-Kaptial-Vagon-svyazi.gsprom.lo': 'GigabitEthernet0/1'}}, 'platform': 'Cisco C921-4P', 'ip': '172.18.152.1'}, 'SW-NUR-KAP-N-OBSH-ITR-01.gsprom.local': {'interfaces': {'GigabitEthernet0/12': {'c2960-NUr-Kaptial-Vagon-svyazi.gsprom.lo': 'GigabitEthernet0/11'}, 'GigabitEthernet0/6': {'Hostel_ITR_1fl_left_Kapital_N': 'GigabitEthernet0'}, 'GigabitEthernet0/7': {'Hostel_ITR_2fl_left_Kapital_N': 'GigabitEthernet0'}, 'GigabitEthernet0/11': {'c2960-VIP-obshaga.gsprom.local': 'GigabitEthernet0/12'}, 'GigabitEthernet0/1': {'5-2': 'br0'}, 'GigabitEthernet0/8': {'Hostel_ITR_2fl_right_Kapital_N': 'GigabitEthernet0'}, 'GigabitEthernet0/5': {'Hostel_ITR_1fl_right_Kapital_N': 'GigabitEthernet0'}}, 'platform': 'cisco WS-C2960CX-8PC-L', 'ip': '172.18.159.11'}, 'c2960-VIP-obshaga.gsprom.local': {'interfaces': {'GigabitEthernet0/4': {'AP3_NUR_Kapital_N': 'GigabitEthernet0'}, 'GigabitEthernet0/2': {'AP2_NUR_Kapital_N': 'GigabitEthernet0'}, 'GigabitEthernet0/1': {'AP1_NUR_Kapital_N': 'GigabitEthernet0'}, 'GigabitEthernet0/3': {'AP4_NUR_Kapital_N': 'GigabitEthernet0'}, 'GigabitEthernet0/12': {'SW-NUR-KAP-N-OBSH-ITR-01.gsprom.local': 'GigabitEthernet0/11'}}, 'platform': 'cisco WS-C2960CX-8PC-L', 'ip': '172.18.159.5'}}
file = argv[1]

with open (file + '.json', 'r') as f:
    switchesJSON = f.read()

switches = json.loads(switchesJSON)

net = Network('1000px', '1000px')  # создаём объект графа

colorsArray = {'Cisco C921-4P':'#900020',
               'cisco WS-C2960CX-8PC-L':'#425E17',
               'Rocket Prism 5AC Gen2':'#D5713F'
               }
#color = '#00ff1e'
i = 0
# добавление узлов
'''net.add_nodes(
    [1, 2, 3, 4, 5],  # node ids
    label=['Node #1', 'Node #2', 'Node #3', 'Node #4', 'Node #5'],  # node labels
    # node titles (display on mouse hover)
    title=['Main node', 'Just node', 'Just node', 'Just node', 'Node with self-loop'],
    color=['#d47415', '#22b512', '#42adf5', '#4a21b0', '#e627a3']  # node colors (HEX)
)'''
for switch in switches:
    i += 1
    label = switches[switch]['ip'] + "\r\n" + switch
    net.add_node(i, label = label, title = switches[switch]['platform'])
    #print(net.nodes)
    if switches[switch]['platform'] in colorsArray:
        net.nodes[len(net.nodes) - 1]['color'] = colorsArray[switches[switch]['platform']]
        #print(len(net.nodes))
        #t = 1
    
    
    switches[switch]['index'] = i

# добавляем тот же список узлов, что и в предыдущем примере, добовляем ребра
'''net.add_edges([(1, 2), (1, 3), (2, 3), (2, 4), (3, 5), (5, 5)])'''
for switch in switches:
    for interface in switches[switch]['interfaces']:
        #print(switches[switch]['interfaces'][interface])
        for remoteSwitch in switches[switch]['interfaces'][interface]:
            if remoteSwitch in switches:
                title = interface + " " + switches[switch]['interfaces'][interface][remoteSwitch]
                net.add_edge(switches[switch]['index'], switches[remoteSwitch]['index'], title = title)
        



#net.barnes_hut()
net.show_buttons(filter_=['physics'])
net.show(file + '.html')  # save visualization in 'graph.html'